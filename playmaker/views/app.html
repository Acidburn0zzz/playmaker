<div id="function-bar">
  <a ng-click="$ctrl.check()" class="btn btn-default">
    <i class="fa fa-refresh" aria-hidden="true"></i> check
  </a>
  <a ng-click="$ctrl.fdroid()" class="btn btn-default">
    <i class="fa fa-android" aria-hidden="true"></i> fdroid update
  </a>
  <strong>Last update:</strong> {{$ctrl.lastFdroidUpdate}}
</div>

<div id="app-container">
  <div ng-hide="!$ctrl.updatingState" id="app-message">
    <h3>Server is loading apks, please wait some seconds, then <a href="/">refresh</a></h3>
  </div>

  <div ng-repeat="app in $ctrl.apps" class="col-xs-12 col-md-12 col-lg-6">
    <div class="panel panel-default">
      <div class="panel-body">
        <img ng-if="$ctrl.desktop" width="100" height="100" ng-src="{{app.images[0].url}}">
        <div class="apk-info">
          <strong><span class="apk-item-title">{{app.title}}</span></strong>
          <i ng-repeat="val in app.starList" ng-class="val.full ? 'fa fa-star' : 'fa fa-star-o'" aria-hidden="true"></i>
          <strong> {{app.formattedStars}}</strong><br>
          <span><strong>Developer: </strong>{{app.author}}</span><br>
          <span><strong>Version: </strong>{{app.versionCode}}</span><br>
          <span><strong>Files: </strong>{{app.files.length}}</span><br>
          <span><strong>Size: </strong>{{app.formattedSize}} MB</span><br>
          <span><strong>PackageId: </strong>{{app.docId}}</span><br>
        </div>

      </div><!-- panel-body -->

      <div ng-hide="!app.updating" class="apk-progress">
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
            <span class="sr-only">Updating</span>
          </div><!-- progress-bar -->
        </div><!-- progress -->
      </div><!-- apk-progress -->

      <div ng-hide="app.updating" class="apk-buttons">
        <a ng-disabled="!app.needsUpdate" ng-click="$ctrl.updateApp(app)" ng-class="{'btn btn-raised btn-primary': app.needsUpdate, 'btn btn-default': !app.needsUpdate}" type="button"><i class="fa fa-download" aria-hidden="true"></i> update</a>

        <a ng-click="$ctrl.delete(app)" class="btn btn-raised btn-danger pull-right"><i class="fa fa-trash-o" aria-hidden="true"></i> delete</a>
      </div>

    </div><!-- panel -->
  </div><!-- main -->

</div><!-- app-container -->
